!function(){"use strict";function a(a){for(var b,c=a.offsetLeft,d=a.offsetTop;a.offsetParent&&a!==document.getElementsByTagName("body")[0];)c+=a.offsetParent.offsetLeft,d+=a.offsetParent.offsetTop,a=a.offsetParent;return b=[c,d]}function b(b,c){var d,e,f;return b.pageX||b.pageY?(d=b.pageX,e=b.pageY):(d=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e=b.clientY+document.body.scrollTop+document.documentElement.scrollTop),f=a(c),d-=f[0],e-=f[1],{x:d,y:e}}var c={enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},zoomIn:function(a){this.applyZoom(a)},zoomOut:function(a){this.applyZoom(a>0?-1*a:a)},pan:function(a,b){this.applyPan(-1*a,-1*b)},isDragging:function(){return this.dragTime>this.dragThreshold},getCurrentPosition:function(){return this.currPos},getCurrentZoom:function(){return this.currZoom}},d=function(a,c){function d(){k.currPos.x=k.currPos.x+n,k.currPos.y=k.currPos.y+o;var a=i.width*(1-k.currZoom*l.zoomStep),b=i.height*(1-k.currZoom*l.zoomStep);k.currPos.x<0?k.currPos.x=0:k.currPos.x>i.width*k.currZoom*l.zoomStep&&(k.currPos.x=i.width*k.currZoom*l.zoomStep),k.currPos.y<0?k.currPos.y=0:k.currPos.y>i.height*k.currZoom*l.zoomStep&&(k.currPos.y=i.height*k.currZoom*l.zoomStep),i.setViewBox(k.currPos.x,k.currPos.y,a,b)}function e(a){if(!k.enabled)return!1;var c=window.event||a,e=i.width*(1-k.currZoom*l.zoomStep),f=i.height*(1-k.currZoom*l.zoomStep),g=b(c,j);return n=e*(g.x-m.x)/i.width*-1,o=f*(g.y-m.y)/i.height*-1,m=g,d(),k.dragTime+=1,c.preventDefault?c.preventDefault():c.returnValue=!1,!1}function f(a,b){return k.enabled?(k.currZoom+=a,void(k.currZoom<l.minZoom?k.currZoom=l.minZoom:k.currZoom>l.maxZoom?k.currZoom=l.maxZoom:(b=b||{x:i.width/2,y:i.height/2},n=i.width*l.zoomStep*(b.x/i.width)*a,o=i.height*l.zoomStep*(b.y/i.height)*a,d()))):!1}function g(a){if(!k.enabled)return!1;var c=window.event||a,d=c.detail||-1*c.wheelDelta,e=b(c,j);return d>0?d=-1:0>d&&(d=1),f(d,e),c.preventDefault?c.preventDefault():c.returnValue=!1,!1}function h(a,b){n=a,o=b,d()}var i=a,j=i.canvas.parentNode,k=this,l={},m={x:0,y:0},n=0,o=0,p=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll MozMousePixelScrollZ":"mousewheel";this.enabled=!1,this.dragThreshold=5,this.dragTime=0,c=c||{},l.maxZoom=c.maxZoom||9,l.minZoom=c.minZoom||0,l.zoomStep=c.zoomStep||.1,l.initialZoom=c.initialZoom||0,l.initialPosition=c.initialPosition||{x:0,y:0},this.currZoom=l.initialZoom,this.currPos=l.initialPosition,this.applyZoom=f,d(),j.onmousedown=function(a){var c=window.event||a;return k.enabled?(k.dragTime=0,m=b(c,j),j.className+=" grabbing",j.onmousemove=e,document.onmousemove=function(){return!1},c.preventDefault?c.preventDefault():c.returnValue=!1,!1):!1},j.onmouseup=function(a){document.onmousemove=null,j.className=j.className.replace(/(?:^|\s)grabbing(?!\S)/g,""),j.onmousemove=null},j.attachEvent?j.attachEvent("on"+p,g):j.addEventListener&&p.split(" ").forEach(function(a){j.addEventListener(a,g,!1)}),this.applyPan=h};d.prototype=c,Raphael.fn.panzoom={},Raphael.fn.panzoom=function(a){var b=this;return new d(b,a)}}();